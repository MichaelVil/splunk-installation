Search Head + Indexer: 192.168.56.50
Universal Forwarder: 192.168.56.60

#Splunk Enterprise

#run as root
groupadd splunk useradd -d /opt/splunk -m -g splunk splunk
wget -O splunk-8.2.2-87344edfcdb4-linux-2.6-x86_64.rpm 'https://d7wz6hmoaavd0.cloudfront.net/products/splunk/releases/8.2.2/linux/splunk-8.2.2-87344edfcdb4-linux-2.6-x86_64.rpm'
rpm -i splunk-8.2.2-87344edfcdb4-linux-2.6-x86_64.rpm  
chown -R splunk:splunk /opt/splunk/
/opt/splunk/bin/splunk enable boot-start -user splunk --accept-license --answer-yes
su - splunk
/opt/splunk/bin/splunk start

#Enable listening port (usualy 9997)
/opt/splunk/bin/splunk enable listen 9997 -auth admin:pa$$w0rd

#Splunk UF

#run as root
groupadd splunk useradd -d /opt/splunkforwarder -m -g splunk splunk
wget -O splunkforwarder-8.2.2-87344edfcdb4-linux-2.6-x86_64.rpm 'https://d7wz6hmoaavd0.cloudfront.net/products/universalforwarder/releases/8.2.2/linux/splunkforwarder-8.2.2-87344edfcdb4-linux-2.6-x86_64.rpm'
rpm -i splunkforwarder-8.2.2-87344edfcdb4-linux-2.6-x86_64.rpm  
chown -R splunk:splunk /opt/splunkforwarder/
/opt/splunkforwarder/bin/splunk enable boot-start -user splunk --accept-license --answer-yes
su - splunk
/opt/splunkforwarder/bin/splunk start

#Configure the UF to send data to the Splunk Enterprise
#The configuration of the outputs.conf located at: /opt/splunkforwarder/etc/system/local/outputs.conf
/opt/splunkforwarder/bin/splunk add forward-server 192.168.56.50:9997 -auth admin:pa$$w0rd

#Forward data to Splunk Enterprise using CLI, for example (/var/log/messages)
#https://docs.splunk.com/Documentation/Splunk/8.2.2/Data/MonitorfilesanddirectoriesusingtheCLI

/opt/splunkforwarder/bin/splunk add monitor /var/log/messages -sourcetype <sourcetype name> -index <destination index> -host <host name for events>
/opt/splunkforwarder/bin/splunk add monitor /var/log/messages -sourcetype access_combined -index main -host uf1

#Forward data to Splunk Enterprise using inputs.conf

mkdir -p  /opt/splunkforwarder/etc/apps/uf-inputs/local
nano /opt/splunkforwarder/etc/apps/uf-inputs/local/inputs.conf

[monitor:///var/log/messages]
disabled = 0
sourcetype = access_combined
index = main
host = uf1

#Restart Splunk
/opt/splunkforwarder/bin/splunk restart (OR systemctl restart Splunkd)
