User Name: admin
Password: pa$$w0rd
Secret: secret

Search Head 1: 10.0.1.1
Search Head 2: 10.0.1.2
Search Head 3: 10.0.1.3
SH Cluster Label: sh_label

Indexer 1: 10.0.2.1
Indexer 2: 10.0.2.2
Indexer 3: 10.0.2.3
Index Cluster Label: idx_label

Search Head Deployer: 10.5.0.1
Cluster Master (Indexer) (Manager, Master Node): 10.5.0.2
Monitoring Console + Deployment Server + License Master: 10.5.0.3
Deployer (SH): 10.5.0.4

#Splunk Enterprise Installation
#run as root
adduser splunk
passwd splunk
wget -O splunk-8.2.2-87344edfcdb4-linux-2.6-x86_64.rpm 'https://d7wz6hmoaavd0.cloudfront.net/products/splunk/releases/8.2.2/linux/splunk-8.2.2-87344edfcdb4-linux-2.6-x86_64.rpm'
rpm -i splunk-8.2.2-87344edfcdb4-linux-2.6-x86_64.rpm  
chown -R splunk:splunk /opt/splunk/
/opt/splunk/bin/splunk enable boot-start -user splunk --accept-license --answer-yes
su - splunk
/opt/splunk/bin/splunk start

#Cluster Master Configuration (10.5.0.2)
#Replication Factor 2, Search Factor 2
/opt/splunk/bin/splunk edit licenser-localslave -master_uri https://10.5.0.3:8089 -auth admin:pa$$w0rd
/opt/splunk/bin/splunk edit cluster-config -mode manager -replication_factor 2 -search_factor 2 -secret secret -cluster_label idx_label -auth admin:pa$$w0rd
/opt/splunk/bin/splunk restart OR systemctl restart Splunkd

#Indexer Cluster Configuration (run on each of the Indexers 10.0.2.1, 10.0.2.2, 10.0.2.3)
/opt/splunk/bin/splunk enable listen 9997
/opt/splunk/bin/splunk disable webserver
/opt/splunk/bin/splunk edit licenser-localslave -master_uri https://10.5.0.3:8089 -auth admin:pa$$w0rd
/opt/splunk/bin/splunk edit cluster-config -mode peer -master_uri https://10.5.0.2:8089 -secret secret -replication_port 9100
/opt/splunk/bin/splunk restart OR systemctl restart Splunkd

#SH Cluster Configuration

#SH1 (10.0.1.1)
/opt/splunk/bin/splunk init shcluster-config -mgmt_uri https://10.0.1.1:8089 -conf_deploy_fetch_url https://10.5.0.4:8089 -replication_port 9200 -replication_factor 2 -secret secret -shcluster_label sh_label -auth admin:pa$$w0rd
/opt/splunk/bin/splunk edit cluster-config -mode searchhead -master_uri https://10.5.0.2:8089 -secret secret -auth admin:pa$$w0rd
/opt/splunk/bin/splunk restart OR systemctl restart Splunkd

#SH2 (10.0.1.2)
/opt/splunk/bin/splunk init shcluster-config -mgmt_uri https://10.0.1.2:8089 -conf_deploy_fetch_url https://10.5.0.4:8089 -replication_port 9200 -replication_factor 2 -secret secret -shcluster_label sh_label -auth admin:pa$$w0rd
/opt/splunk/bin/splunk edit cluster-config -mode searchhead -master_uri https://10.5.0.2:8089 -secret secret -auth admin:pa$$w0rd
/opt/splunk/bin/splunk restart OR systemctl restart Splunkd

#SH3 (10.0.1.3)
/opt/splunk/bin/splunk init shcluster-config -mgmt_uri https://10.0.1.3:8089 -conf_deploy_fetch_url https://10.5.0.4:8089 -replication_port 9200 -replication_factor 2 -secret secret -shcluster_label sh_label -auth admin:pa$$w0rd
/opt/splunk/bin/splunk edit cluster-config -mode searchhead -master_uri https://10.5.0.2:8089 -secret secret -auth admin:pa$$w0rd
/opt/splunk/bin/splunk restart OR systemctl restart Splunkd

#Configure Captain (on SH1)
/opt/splunk/bin/splunk bootstrap shcluster-captain -servers_list "https://10.0.1.1:8089, https://10.0.1.2:8089, https://10.0.1.2:8089" -auth admin:pa$$w0rd











