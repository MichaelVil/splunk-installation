User Name: admin
Password: pa$$w0rd

Search Head 1: 10.0.1.1
Search Head 2: 10.0.1.2
Search Head 3: 10.0.1.3

Indexer 1: 10.0.2.1
Indexer 2: 10.0.2.2
Indexer 3: 10.0.2.3

Universal Forwarder 1: 10.0.3.1
Universal Forwarder 2: 10.0.3.2
Universal Forwarder 3: 10.0.3.3

Heavy Forwarder 1: 10.0.4.1
Heavy Forwarder 2: 10.0.4.2

Search Head Deployer: 10.5.0.1
Cluster Master (Indexer) (Manager, Master Node): 10.5.0.2
Monitoring Console + Deployment Server + License Master: 10.5.0.3
Deployer (SH): 10.5.0.4

* Some of the instances can work together, for example:
One instance of Splunk can include MC, LM and DS. In that case just use the same ip/host

* The OS is CentOS 7
* Splunk version 8.2.2

_____________________________________________________________________________________________________________________________________________________________________

#Time Zone configuration. Set the correct TZ:
timedatectl set-timezone Asia/Jerusalem

#Firewall Configuration. Ppen the  ports required for Splunk:
firewall-cmd --permanent --add-port=8000/tcp --add-port=8089/tcp --add-port=9997/tcp
firewall-cmd --reload (OR systemctl restart firewalld)

default ports:

9997 for forwarders to the Splunk indexer
8000 for clients to the Splunk Search page
8089 for splunkd (also used by deployment server).

#disable firewall:

systemctl stop firewalld
systemctl disable firewalld


#Splunk Installation 

#run as root
#Add user and group
groupadd splunk
useradd -d /opt/splunk -m -g splunk splunk

#Download Splunk
wget -O splunk-8.2.2-87344edfcdb4-linux-2.6-x86_64.rpm 'https://d7wz6hmoaavd0.cloudfront.net/products/splunk/releases/8.2.2/linux/splunk-8.2.2-87344edfcdb4-linux-2.6-x86_64.rpm'

#Installation
rpm -ivh splunk-8.2.2-87344edfcdb4-linux-2.6-x86_64.rpm
  
#Enable boot-start, license and etc.  
/opt/splunk/bin/splunk enable boot-start -user splunk --accept-license --answer-yes

#Change file owner and group  
chown -R splunk:splunk /opt/splunk/

#Run as Splunk user
su - splunk

#Start Splunk  
/opt/splunk/bin/splunk start (OR systemctl start splunk)

#Install Splunk License (Web GUI or)
/opt/splunk/bin/splunk add licenses <path to license> -auth admin:pa$$w0rd


Splunk UF Installation 

#run as root
groupadd splunk 
useradd -d /opt/splunkforwarder -m -g splunk splunk
wget -O splunkforwarder-8.2.2-87344edfcdb4-linux-2.6-x86_64.rpm 'https://d7wz6hmoaavd0.cloudfront.net/products/universalforwarder/releases/8.2.2/linux/splunkforwarder-8.2.2-87344edfcdb4-linux-2.6-x86_64.rpm'
rpm -ivh splunkforwarder-8.2.2-87344edfcdb4-linux-2.6-x86_64.rpm  
/opt/splunkforwarder/bin/splunk enable boot-start -user splunk --accept-license --answer-yes
chown -R splunk:splunk /opt/splunkforwarder/
su - splunk
/opt/splunkforwarder/bin/splunk start (OR systemctl start splunk)


#Splunk Removal

#run as root
#Stop service and disable boot-start
/opt/splunk/bin/splunk stop
/opt/splunk/bin/splunk disable boot-start

#Remove package  
rpm -e splunk-8.2.2-87344edfcdb4.x86_64

#Find and kill any lingering processes that contain "splunk" in their name
kill -9 `ps -ef | grep splunk | grep -v grep | awk '{print $2;}'`

#remove Splunk directory
rm -rf /opt/splunk

#Remove any Splunk Enterprise datastore or indexes outside the top-level directory, if they exist
rm -rf /opt/splunkdata

#Delete the Splunk user and group, if they exist
userdel splunk
groupdel splunk


#Splunk UF Removal

#run as root
/opt/splunkforwarder/bin/splunk stop
/opt/splunkforwarder/bin/splunk disable boot-start
rpm -e splunkforwarder-8.2.2-87344edfcdb4.x86_64
kill -9 `ps -ef | grep splunk | grep -v grep | awk '{print $2;}'`
rm -rf /opt/splunkforwarder
userdel splunk
groupdel splunk
